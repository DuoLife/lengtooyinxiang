<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/base.css" />
<title>冷兔实验室-壁纸</title>
<style>
/*content*/
#content {width: 1000px; margin: 20px auto; position: relative;}
.card { width: 320px; padding: 6px; position: absolute; background: #FFF; z-index: 1;}
.card .text_div {width: 320px; height: 28px;margin-top: 4px; display: none;}
.card img { width: 320px; height: 510px;}
.card .isshow_png { width: 44px; height: 42px; position: absolute; right: 6px; top: 6px;}
.card .onshow { float: left; width: 56px; line-height: 28px; background: url(img/onshow0.png) 0 center no-repeat; text-align:right;}
.card .delete { margin-left: 20px;float: left; width: 56px; line-height: 28px; background:url(img/delete0.png) 0 center no-repeat; text-align:right;}
.card .card_date {line-height: 28px;float: right;}
</style>
<script type="text/javascript" src="js/ming.js"></script>
<script>
window.onload = function () {
	onloadCard();
};
////////////////////////////////////////
function getStyle(obj, attr) {
	return obj.currentStyle? obj.currentStyle[attr] : getComputedStyle(obj)[attr];
}
function setPosition() {
	var indexZ = 10;
	var oContent = document.getElementById('content');
	var aLst = oContent.getElementsByClassName('card');
	for(var i=0; i<aLst.length; i++) {
		aLst[i].style.left = (i%3)*(320 + 16 + 20) + 'px';
		aLst[i].style.top = Math.floor((i/3))*(510 + 20) + 'px';
		aLst[i].onmouseover = function () {
			this.style.border = '#DDD solid 2px';
			this.style.top = (parseInt(getStyle(this, 'top'))-2) + 'px';
			this.style.left = (parseInt(getStyle(this, 'left'))-2) + 'px';
			this.style.zIndex = indexZ++;
			var oDiv = this.getElementsByTagName('div')[0];
			oDiv.style.display = 'block';
		};
		aLst[i].onmouseout = function () {
			this.style.top = (parseInt(getStyle(this, 'top'))+2) + 'px';
			this.style.left = (parseInt(getStyle(this, 'left'))+2) + 'px';
			this.style.border = '';
			var oDiv = this.getElementsByTagName('div')[0];
			oDiv.style.display = 'none';
		};
	}
};
//onload data
function onloadCard() {
	var url = '/lengtooyinxiang/web/lengtoocardlist.do';
	var paramStr = 'refresh=true';
	AJAX('post', url, paramStr, function (data) {
		var cardList = data.lengtoocardlist;
		var str = '';
		for(var i=0; i<cardList.length; i++) {
			var temp = cardList[i];
			str += '<div class="card"><img src="' + temp.Small_imgurl + '"/>';
			if(temp.OnShow == 1) {
				str += '<div class="text_div"><a class="block onshow">隐藏</a>';
			}else if(temp.OnShow == 0) {
				str += '<img class="isshow_png" src="img/isshow0.png"/><div class="text_div"><a class="block onshow">显示</a>';
			}
            str += '<a class="block delete">删除</a><p class="card_date">' + temp.Createdate + '</p></div></div>';
		}
		var oContent = document.getElementById('content');
		oContent.style.height = Math.floor((i/3) + 1)*(510 + 20) + 'px';
		oContent.innerHTML = str;
		//元素写入结束，确定元素位置
		setPosition();
	});
}
</script>
</head>

<body>
<div id="wrap_header">
    <header>
        <div id="logo">
            <img src="img/logo.png"/>
            <p id="logo_title">冷兔实验室</p>
            <p id="logo_version">后台管理系统V1.0</p>
        </div>
        <nav>
            <a href='allbizhi.html'><li>壁纸</li></a>
            <a href='#'><li class="active">卡片</li></a>
        </nav>
        <div id="upload_div">
            <a href="#">
                <p>上传素材</p>
            </a>
        </div>
    </header>
</div>
<div id="content">
</div>
</body>
</html>